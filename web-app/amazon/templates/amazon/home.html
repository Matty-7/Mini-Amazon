{% extends "amazon/base.html" %}
{% load static %}

{% block content %}
  {% if seller_name %}
    <h1>Welcome to {{ seller_name }}'s selling page.</h1>
  {% else %}
    <h1>Welcome to mini amazon website</h1>
  {% endif %}

  <!-- search bar -->
  <form method="POST">
    {% csrf_token %}
    <div class="input-group p-2 col-md-8 offset-2 bg-light rounded rounded-pill shadow-sm mt-4 searchbar">
      <input
        name="search"
        type="search"
        placeholder="What do you want?"
        class="form-control border-0 bg-light"
        style="outline: none; border: 0; box-shadow: none"
      />
      <div class="input-group-append">
        <button type="submit" class="btn btn-link text-primary">
          <i class="fa fa-search"></i>
        </button>
      </div>
    </div>
  </form>

  <!-- Amazon-style Hero Banner -->
  <div id="heroBanner" class="carousel slide" data-ride="carousel" style="z-index: 1; position: relative">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img
          src="{% static 'img/banner1.png' %}"
          class="d-block w-100"
          alt="Banner 1"
          style="height: 70vh; object-fit: cover"
        />
      </div>
      <div class="carousel-item">
        <img
          src="{% static 'img/banner2.png' %}"
          class="d-block w-100"
          alt="Banner 2"
          style="height: 70vh; object-fit: cover"
        />
      </div>
      <div class="carousel-item">
        <img
          src="{% static 'img/banner3.png' %}"
          class="d-block w-100"
          alt="Banner 3"
          style="height: 70vh; object-fit: cover"
        />
      </div>
    </div>
    <a class="carousel-control-prev" href="#heroBanner" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#heroBanner" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>

  <!-- item list overlayed on banner -->
  {% if items %}
    <div class="container" style="margin-top: -120px; position: relative; z-index: 2">
      {% for cat in categories %}
        <section class="mb-5">
          <h4 class="mt-4">{{ cat.category|capfirst }}</h4>
          <div class="d-flex flex-row overflow-auto pb-2">
            {% for item in items %}
              {% if item.category.category == cat.category %}
                <div class="card m-2 shadow-sm border-0" style="min-width: 180px">
                  <a href="{% url 'item_detail' item.id %}" class="text-decoration-none text-dark">
                    <img
                      src="{{ item.img }}"
                      class="card-img-top"
                      style="height: 180px; object-fit: contain"
                    />
                    <div class="card-body px-2">
                      <h6 class="card-title">{{ item.description }}</h6>
                      <p class="card-text text-danger mb-0">
                        $ {{ item.price|floatformat:2 }}
                      </p>
                      <small class="text-muted">Sold by {{ item.seller.username }}</small>
                    </div>
                  </a>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </section>
      {% endfor %}
    </div>
  {% else %}
    <h4 class="m-4">Nothing match the query</h4>
  {% endif %}
{% endblock %}
